# 数据库索引优化
>根据 imooc 视频教程 整理的笔记

## MySQL支持的索引类型

* __B-tree 索引的特点__

    1. B-tree 索引以B+树的结构存储数据

    2. 能够加快数据的查询速度

    3. 更适合进行范围查找(顺序存储)

* **什么情况下可以用到B树索引**

    1. 全值匹配的查询

        order_sn = '54188'

    2. 匹配最左前缀的查询

    3. 匹配列前缀查询

        order_sn like '541%'

    4. 匹配范围值的查询

        order_sn > '54100' and order_sn < '54188'

    5. 精确匹配左前列并范围匹配另一列

        如，匹配订单姓名和时间段范围

    6. 只访问索引的查询

* **BTree索引的使用限制**

    1. 如果不是按照索引最左列开始查找，则无法使用索引

    2. 使用索引时不能跳过索引中的列

    3. Not in 和 <> 操作无法使用索引

    4. 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引

* **Hash 索引的特点**

    1. Hash索引是基于Hash表实现的，只有查询条件精确匹配Hash索引中的所有列时，才能够使用到Hash索引。也就是说该索引只能用到等值查询中。范围查询，
    模糊查询等都不能使用到Hash索引。

    2. 对于Hash索引中的所有列，存储引擎都会为每一行计算一个Hash码，
    Hash索引中存储的就是Hash码。

* **Hash索引的限制**

    1. Hash索引必须进行二次查找

    2. Hash索引无法用于排序

    3. Hash索引不支持部分索引查找也不支持范围查找，且应该用于区别力大的列，
    如，身份证。像性别这种表中一共就两种值区分度不大的就不应该使用Hash索引

    4. Hash索引中Hash码的计算可能存在Hash冲突

* **为什么要使用索引**

    1. 索引大大减少了存储引擎需要扫描的数据量

    2. 索引可以帮助我们进行排序以避免使用临时表

    3. 索引可以把随机IO变为顺序IO

* **索引是不是越多越好**

    1. 索引会增加写操作的成本

    2. 太多的索引会增加查询优化器的选择时间

