# mysql 复制功能

```
复制功能，增加多个从库，分担读负载，为高可用，灾难恢复，备份提供更过选择

二进制日志，重放，异步同步
```

## 复制解决了什么问题
```
实现在不同服务器上的数据分布

利用二进制日志增量进行

不需要太多的带宽

但是使用基于行的复制在进行大批量的更改时，会对带宽带来一定压力
特别是跨IDC环境进行复制应该分批进行

实现在不同服务器上的数据分布

实现数据读取的负载均衡
    需要其他组件配合完成，利用DNS轮询的方式把程序的读连接到不同的备份数据库
    使用LVS，haproxy这样的代理方式
    非共享架构，同样的数据分布在多台服务器上

增强了数据安全性
    利用备库的备份来减少主库的负载
    复制并不能代替备份

实现数据库高可用和故障切换
    方便进行数据库高可用架构的部署
    避免MySQL单点失败

实现数据库在线升级
```

# mysql 二进制日志
```
mysql 服务层日志

    二进制日志
        记录了所有对MySQL数据库的修改事件
        包括增删改查事件和对表结构的修改事件

        binlog 中的日志都是已经成功执行了的，而由于语法错误等问题导致的失败语句则没有被记录
    
    慢查日志
    
    通用日志

mysql 存储引擎层日志

    Innodb：重做日志，回滚日志
```

## 二进制日志格式
```
基于段的格式
    binlog_format=STATEMENT

    记录的sql语句，不需要特殊的工具等就能查看

    优点：
        日志记录量相对较小，节约磁盘及网络IO


```
