# Zookeeper 知识
> https://mp.weixin.qq.com/s/pnU_re4GvcO_VGkWRNw4jA  

```
zookeeper和客户端之间以socket形式进行双向通讯，客户端可以主动调用服务器提供的api，服务器可以主动向客户端推送事件。
有多种事件可以watch，比如节点的增删改，子节点的增删改，会话状态变更等。
```

```
keeper的事件有传递机制，字节点的增删改触发的事件会向上层依次传播，所有的父节点都可以收到字节点的数据变更事件，
所以层次太深／子节点太多会给服务器的事件系统带来压力，节点分配要做好周密的规划。
```

```
zookeeper的读性能随着节点数量的提升能不断增加，但是写性能会随着节点数量的增加而降低，所以节点的数量不宜太多，一般配置成3个或者5个就可以了。
```

```
当服务器节点增多时，复杂度会随之提升。因为每个节点和其它节点之间要进行p2p的连接。
3个节点可以容忍挂掉1个节点，5个节点可以容忍挂掉2个节点。
客户端连接zookeeper时会选择任意一个节点保持长链接，后续通信都是通过这个节点进行读写的。
如果该节点挂了，客户端会尝试去连接其它节点。
```

```
zookeeper的节点可以是持久化(Persistent)的，也可以是临时(Ephermeral)的。
所谓临时的节点就是会话关闭后，会话期间创建的所有临时节点会立即消失。
一般用于服务发现系统，将服务进程的生命期和zookeeper子节点的生命期绑定在一起，起到了实时监控服务进程的存活的效果。

zookeeper还提供了顺序节点。
类似于mysql里面的auto_increment属性。
服务器会在顺序节点名称后自动增加自增的唯一后缀，保持节点名称的唯一性和顺序性。


https://blog.csdn.net/pysense/article/details/100709138
使用kazoo连接zookeeper并监听节点数量以及值变化
```


