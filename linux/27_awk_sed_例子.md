#### AWK 例子

#### 获取文本里面特定的行
```shell
sed -n '13300000,13341656p' part-00000-9b65ce3d-ff21-4c3f-8258-aa395e09c5f3-c000.csv > 13300000_13341656p_data
```

#### 文本文件中首尾增加字符
```
在每行的头添加字符，比如"HEAD"，命令如下：

sed 's/^/HEAD&/g' test.file

在每行的行尾添加字符，比如“TAIL”，命令如下：

sed 's/$/&TAIL/g' test.file

3.如果想导出文件，在命令末尾加"> outfile_name"；如果想在原文件上更改，添加选项"-i"，如

4.也可以把两条命令和在一起，在test.file的每一行的行头和行尾分别添加字符"HEAD"、“TAIL”，命令：sed '/./{s/^/HEAD&/;s/$/&TAIL/}' test.file
```

##### 分隔并提取
```shell
cat 32_aq | awk -F'|' '{print $1}' > /tmp/6kw_sifa_docid
```

```shell
awk分割字符串
想从目标字符串中，提取想要的字符，可以用awk命令。

例如：

从<version>1.3.1-SNAPSHOT</version>中提取版本号，则可以用命令：awk -F'[<>]' '{print $3}'

# echo "<version>1.3.1-SNAPSHOT</version>"|awk -F'[<>]' '{print $3}'

1.3.1-SNAPSHOT

命令解析：

-F定义了分隔符，默认以空格分割。此处定义了以<>两个分隔符进行分割

print $3，打印分割后的第三列。$0为分割前的整个字符串
```

##### 从json文件提取数据, 不用这种方式了, 有好用的工具 jq
```shell
gawk '{print $2}' /media/server/Seagate_data/wenshu_src_original/wenshu_superfast_bw.json | gawk -F ',' '{print $1}' | gawk '{gsub("\"", "");print}' > /media/server/Seagate_data/docid/wenshu_superfast_bw.json
```

##### sed字符串替换

\1. sed替换的基本语法为:

```
sed 's/原字符串/替换字符串/'
```

单引号里面,s表示替换,三根斜线中间是替换的样式,特殊字符需要使用反斜线”\”进行转义。

\2. 单引号” ‘ ’”是没有办法用反斜线”\”转义的,这时候只要把命令中的单引号改为双引号就行了,格式如下：

```
# 要处理的字符包含单引号
sed "s/原字符串包含'/替换字符串包含'/" 
```

\3. 命令中的三根斜线分隔符可以换成别的符号,有时候替换目录字符串的时候有较多斜线，这个时候换成其它的分割符是较为方便,只需要紧跟s定义即可。

```
# 将分隔符换成问号”?”:
sed 's?原字符串?替换字符串?'
```

\4. 可以在末尾加g替换每一个匹配的关键字,否则只替换每行的第一个,例如:

```
# 替换所有匹配关键字
sed 's/原字符串/替换字符串/g'
```

\5. 一些特殊字符的使用

　　”^”表示行首

　　”$”符号如果在引号中表示行尾，但是在引号外却表示末行(最后一行)

```
# 注意这里的 " & " 符号，如果没有 “&”，就会直接将匹配到的字符串替换掉
sed 's/^/添加的头部&/g' 　　　　 #在所有行首添加
sed 's/$/&添加的尾部/g' 　　　　 #在所有行末添加
sed '2s/原字符串/替换字符串/g'　 #替换第2行
sed '$s/原字符串/替换字符串/g'   #替换最后一行
sed '2,5s/原字符串/替换字符串/g' #替换2到5行
sed '2,$s/原字符串/替换字符串/g' #替换2到最后一行 
```

6.批量替换字符串

```
sed -i "s/查找字段/替换字段/g" `grep 查找字段 -rl 路径`
sed -i "s/oldstring/newstring/g" `grep oldstring -rl yourdir
```

 

\7. sed处理过的输出是直接输出到屏幕上的,使用参数”i”直接在文件中替换。

```
# 替换文件中的所有匹配项
sed -i 's/原字符串/替换字符串/g' filename
```

\8. 多个替换可以在同一条命令中执行,用分号”;”分隔，其格式为:

```
# 同时执行两个替换规则
sed 's/^/添加的头部&/g；s/$/&添加的尾部/g' 
```
